(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04989258"],{"3c7f":function(t,e,a){},"56c2":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"menu_model_add model_add"},[a("Form",{ref:"formValidate",staticClass:"clearfix",attrs:{model:t.innerInfo,"label-position":"right","label-width":120}},[a("FormItem",{attrs:{label:"角色名称",prop:"roleName"}},[a("i-Input",{attrs:{disabled:"",type:"text",clearable:"",placeholder:"请输入用户名称"},model:{value:t.innerInfo.roleName,callback:function(e){t.$set(t.innerInfo,"roleName",e)},expression:"innerInfo.roleName"}})],1),a("FormItem",{attrs:{label:"使用状态",prop:"status"}},[a("i-Switch",{attrs:{size:"large",value:t.innerInfo.status,disabled:""},model:{value:t.innerInfo.status,callback:function(e){t.$set(t.innerInfo,"status",e)},expression:"innerInfo.status"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("启用")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("停止")])])],1),a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"用户名称"}},[a("Input",{staticStyle:{width:"314px"},attrs:{placeholder:"请输入用户名称",clearable:""},model:{value:t.formSearch.userName,callback:function(e){t.$set(t.formSearch,"userName",e)},expression:"formSearch.userName"}}),a("Icon",{staticStyle:{"font-size":"22px","margin-left":"12px"},attrs:{type:"ios-search"},on:{click:t.searchInfo}}),t.cancelFlag?a("Button",{staticClass:"cancel_button",attrs:{type:"primary",icon:"md-return-right"},on:{click:t.calcelAuthorization}},[t._v("取消授权人员")]):t._e(),t.cancelFlag?t._e():a("Button",{staticClass:"cancel_button2",attrs:{type:"primary",icon:"md-return-right"},on:{click:t.calcelAuthorization}},[t._v("增加授权人员")])],1),t.cancelFlag?a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"用户权限配置",required:!0}},[a("p",{staticStyle:{color:"#999"}},[t._v("*未授权人员*")]),a("Table",{ref:"selection",attrs:{border:"",columns:t.columns4,loading:t.tableLoading,data:t.data1,"highlight-row":!0},on:{"on-selection-change":t.chooseUser}}),a("Page",{staticClass:"page_class",attrs:{total:t.pageTotal,current:t.currentPage,"page-size":t.pageSize,"show-total":""},on:{"on-change":t.changePage}})],1):t._e(),t.cancelFlag?t._e():a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"用户权限配置",required:!0}},[a("p",{staticStyle:{color:"#999"}},[t._v("*已授权人员*")]),a("Table",{ref:"selection",attrs:{border:"",columns:t.columns4,loading:t.tableLoading,data:t.data2,"highlight-row":!0},on:{"on-selection-change":t.chooseUserCancel}}),a("Page",{staticClass:"page_class",attrs:{total:t.pageTotal,current:t.currentPage,"page-size":t.pageSize,"show-total":""},on:{"on-change":t.changePage}})],1)],1),t.disabled?t._e():a("div",{staticClass:"listbutton"},[t.cancelFlag?a("Button",{staticClass:"savebutton",attrs:{type:"primary",icon:"md-checkmark"},on:{click:t.Addoperate}},[t._v("授权")]):t._e(),t.cancelFlag?t._e():a("Button",{staticClass:"savebutton",attrs:{type:"primary",icon:"md-checkmark"},on:{click:t.cancelAddoperate}},[t._v("取消授权")]),a("Button",{staticClass:"cancelbutton",attrs:{type:"primary",icon:"md-undo"},on:{click:t.cancleFun}},[t._v("取消")])],1)],1)},n=[],i=(a("63ff"),a("f8f9")),r=(a("4634"),{data:function(){return{pageTotal:1,currentPage:1,pageSize:5,tableLoading:!1,cancelFlag:!1,dic_data:[{name:"所属系统",data:[]}],currentChoose:-1,columns4:[{type:"selection",width:60,align:"center"},{title:"用户名称",key:"userName"},{title:"登录名",key:"loginName"},{title:"部门",key:"departmentName"},{title:"用户状态",key:"status",align:"center",render:function(t,e){return t("span",{style:{backgroundColor:"停用"==e.row.status?"red":"#1ab394",padding:"0px 12px",display:"inline-block",color:"#fff",borderRadius:"16px"}},e.row.status)}}],data1:[],data2:[],departments:[],innerInfo:{roleName:"",status:!1},idList:[],haveList:[],formSearch:{userName:"",phone:"",startTime:"",endTime:"",departmentId:0,status:0,pageSize:5,pageIndex:1,roleId:""},rowId:""}},props:{disabled:Boolean},methods:{showListData:function(t){var e=this;this.currentPage=t;var a={userName:"",phone:"",startTime:"",endTime:"",departmentId:0,status:0,pageSize:5,pageIndex:t,roleId:this.rowId};this.tableLoading=!0,this.$api.RolesConfig.WidthOutPageUsers(a).then((function(t){e.data1=t.data.result.items,e.data1.forEach((function(t){1==t.status?t.status="启用":(t.status="停用",t._disabled=!0),e.departments.forEach((function(e){t.departmentId==e.id&&(t.departmentId=e.value)}))})),e.pageTotal=t.data.result.totalCount,e.tableLoading=!1}))},showListData2:function(t){var e=this;this.currentPage=t;var a={userName:"",phone:"",startTime:"",endTime:"",departmentId:0,status:0,pageSize:5,pageIndex:t,roleId:this.rowId};this.tableLoading=!0,this.$api.RolesConfig.HavePageUsers(a).then((function(t){e.data2=t.data.result.items,e.data2.forEach((function(t){1==t.status?t.status="启用":(t.status="停用",t._disabled=!0),e.departments.forEach((function(e){t.departmentId==e.id&&(t.departmentId=e.value)}))})),e.pageTotal=t.data.result.totalCount,e.tableLoading=!1}))},searchInfo:function(){var t=this;this.formSearch.roleId=this.rowId,this.tableLoading=!0,this.$api.RolesConfig.PageUsers(this.formSearch).then((function(e){t.data1=e.data.result.items,t.data1.forEach((function(e){1==e.status?e.status="启用":e.status="停用",t.departments.forEach((function(t){e.departmentId==t.id&&(e.departmentId=t.value)}))})),t.pageTotal=e.data.result.totalCount,t.tableLoading=!1}))},getAllDeparment:function(){var t=this,e={departmentName:"",leader:"",pageIndex:-1,pageSize:12};this.$api.ManageConfig.PageManage(e).then((function(e){t.listDate=e.data.result.items,t.pageTotal=e.data.result.totalCount,t.tableLoading=!1,t.listDate.forEach((function(e){t.departments.push({value:e.departmentName,id:e.id})}))}))},getDetail:function(t){var e=this;this.rowId=t,this.cancelFlag=!1,this.showListData(1),this.showListData2(1);var a={id:t};this.$api.RolesConfig.DetailRoles(a).then((function(t){e.innerInfo=t.data.result,1==t.data.result.status?t.data.result.status=!0:t.data.result.status=!1}))},chooseUser:function(t){var e=this;this.idList=[],t.forEach((function(t){e.idList.push(t.id)}))},chooseUserCancel:function(t){var e=this;this.haveList=[],t.forEach((function(t){e.haveList.push(t.id)}))},Addoperate:function(){var t=this,e={roleId:this.rowId,userIds:this.idList,isAdd:!0};this.idList.length>0?e.isAdd=!0:e.isAdd=!1,this.$refs.formValidate.validate((function(a){a?t.$api.RolesConfig.RolesUsers(e).then((function(e){e.data.success?(t.$Message.success("提交成功!"),t.$emit("RefreshParent"),t.$refs.formValidate.resetFields(),t.cancelFlag=!0):t.$Message.error("提交失败!")})):t.$Message.error("表单验证失败!")}))},cancelAddoperate:function(){var t=this,e={roleId:this.rowId,userIds:this.haveList,isAdd:!1};this.$refs.formValidate.validate((function(a){a?t.$api.RolesConfig.RolesUsers(e).then((function(e){e.data.success?(t.$Message.success("提交成功!"),t.$emit("RefreshParent"),t.$refs.formValidate.resetFields(),t.cancelFlag=!0):t.$Message.error("提交失败!")})):t.$Message.error("表单验证失败!")}))},Editoperate:function(){},cancleFun:function(){this.$emit("RefreshParent")},changePage:function(t){this.showListData(t)},calcelAuthorization:function(){1==this.cancelFlag?(this.cancelFlag=!1,this.showListData2(1)):(this.cancelFlag=!0,this.showListData(1))}},mounted:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$helper.getDicByCodeName(this.dic_data);case 2:this.getAllDeparment();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}),o=r,l=(a("d0e9"),a("6691")),c=Object(l["a"])(o,s,n,!1,null,null,null);e["default"]=c.exports},d0e9:function(t,e,a){"use strict";var s=a("3c7f"),n=a.n(s);n.a}}]);