(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f81d9c2"],{"3e48":function(t,e,a){"use strict";var n=a("9414"),s=a.n(n);s.a},9414:function(t,e,a){},ab0a:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"menu_model_add model_add"},[a("Form",{ref:"formValidate",staticClass:"clearfix",staticStyle:{width:"100%"},attrs:{model:t.innerInfo,"label-position":"right",rules:t.ruleValidate,"label-width":120}},[a("FormItem",{attrs:{label:"角色名称",prop:"roleName"}},[a("i-Input",{attrs:{type:"text",disabled:"",clearable:"",placeholder:"请输入用户名称"},model:{value:t.innerInfo.roleName,callback:function(e){t.$set(t.innerInfo,"roleName",e)},expression:"innerInfo.roleName"}})],1),a("FormItem",{attrs:{label:"角色状态"}},[a("i-Switch",{attrs:{size:"large",disabled:""},model:{value:t.innerInfo.status,callback:function(e){t.$set(t.innerInfo,"status",e)},expression:"innerInfo.status"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("启用")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("停止")])])],1),a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"菜单权限配置"}},[a("Tree",{attrs:{data:t.data2,"show-checkbox":""},on:{"on-check-change":t.chooseMenu}})],1)],1),a("div",{staticClass:"listbutton"},[a("Button",{staticClass:"savebutton",attrs:{type:"primary",icon:"md-checkmark"},on:{click:t.Addoperate}},[t._v("授权")]),a("Button",{staticClass:"cancelbutton",attrs:{type:"primary",icon:"md-undo"},on:{click:t.cancleFun}},[t._v("取消")])],1)],1)},s=[],i=(a("63ff"),a("f8f9")),r=(a("4634"),a("fafd"),a("8062"),a("dea4")),o={props:{disabled:Boolean},data:function(){return{dic_data:[{name:"所属系统",data:[]}],innerInfo:{roleName:"",description:"",status:""},data2:[],rowId:"",ruleValidate:{phoneNumber:Object(r["a"])(this.$helper.validateProvider("联系电话",!1))},idList:[],ids:[]}},inject:["reload"],methods:{getDetail:function(t){var e=this;console.log(this.idList),this.rowId=t;var a={id:t};this.$api.RolesConfig.DetailRoles(a).then((function(t){e.innerInfo=t.data.result,1==t.data.result.status?t.data.result.status=!0:t.data.result.status=!1})),this.getMenuTree(t)},Addoperate:function(){var t=this,e={id:this.rowId,roleName:this.innerInfo.roleName,description:this.innerInfo.description,status:1==this.innerInfo.status?1:2,menuIds:this.idList};console.log(e),this.$refs.formValidate.validate((function(a){a?t.$api.RolesConfig.UpdateRoles(e).then((function(e){e.data.success?(t.$Message.success("提交成功!"),t.$emit("RefreshParent"),t.$refs.formValidate.resetFields()):t.$Message.error("提交失败!")})):t.$Message.error("表单验证失败!")})),this.ids=[]},cancleFun:function(){this.$emit("RefreshParent")},getMenuTree:function(t){var e=this,a={roleId:t};this.$api.MenuConfig.AllMenuTree(a).then((function(t){e.data2=t.data.result;var a=e.getIds(e.data2);e.idList=Object(r["a"])(new Set(a))}))},getIds:function(t){var e=this;return t.forEach((function(t){1==t.checked&&e.ids.push(t.id),t.children&&0!==t.children.length&&e.getIds(t.children)})),e.ids},chooseMenu:function(t){var e=this;this.idList=[],t.forEach((function(t){t.selected=!0,e.idList.push(t.id)}));var a=this.idList;this.idList=Object(r["a"])(new Set(a))}},mounted:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$helper.getDicByCodeName(this.dic_data);case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},l=o,c=(a("3e48"),a("6691")),d=Object(c["a"])(l,n,s,!1,null,null,null);e["default"]=d.exports}}]);